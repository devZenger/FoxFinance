import os, sys, sqlite3

if os.path.exists("FoxFinance.db"):
    print("Datenbank bereits vorhanden")
    sys.exit(0)
    
connection = sqlite3.connect("FoxData.db")
cursor = connection.cursor()
sql = "CREATE TABLE customers(customer_id INTEGER PRIMARY KEY, name TEXT, mail_adress TEXT, string phone_number, string birthday, deposit REAL, password TEXT, registration_date TEXT)"
cursor.execute(sql)    

sql = "CREATE TABLE stocks(wkn TEXT PRIMARY KEY, ticker_symbol TEXT, company_name TEXT)"
cursor.execute(sql)    

sql = "CREATE TABLE stock_data(dataID INTEGER PRIMARY KEY, wkn TEXT, date TEXT, open REAL, high REAL, low REAL, close REAL, volume INTEGER, dividends REAL, stock_splits REAL, FOREIGN KEY (wkn) REFERENCES stocks(wkn), UNIQUE (wkn, date))"
cursor.execute(sql) 

sql = "CREATE TABLE stock_watch(watchlist_id INTEGER PRIMARY KEY, customer_id INTERGER, wkn TEXT, price_per_stock REAL, transaction_date TEXT, FOREIGN KEY (customer_id) REFERENCES customers)"  



sql = "INSERT INTO customers (name, mail_adress, deposit, password, registration_date) VALUES('Hans Maier', 'maier@aol.com', 3500, 'test', '13.05.2000')"
cursor.execute(sql)
connection.commit()
sql = "INSERT INTO customers (name, mail_adress, deposit, password, registration_date) VALUES('Herbert Müller', 'h.meuller@hotmail.com', 22000, 'test', '20.07.2010')"
cursor.execute(sql)
connection.commit()
sql = "INSERT INTO customers (name, mail_adress, deposit, password, registration_date) VALUES('Susi Bäcker', 'susi2010@gmail.com', 27600, 'test', '1.12.2009')"
cursor.execute(sql)
connection.commit()

connection.close()